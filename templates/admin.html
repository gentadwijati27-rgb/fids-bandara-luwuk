<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Admin Jadwal Penerbangan</title>
<link rel="stylesheet" href="/static/style.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body class="admin">

<div class="admin-container">

  <!-- HEADER -->
  <div class="admin-header">
    ğŸ‘¨â€ğŸ’¼ Admin Jadwal Penerbangan
  </div>

  <!-- FORM TAMBAH -->
  <div class="admin-card">
    <div class="card-title">â• Tambah Jadwal</div>

    <form action="/add" method="post" class="admin-form">
      <select name="jenis" required>
        <option value="">Pilih Jenis</option>
        <option value="keberangkatan">âœˆï¸ Keberangkatan</option>
        <option value="kedatangan">ğŸ›¬ Kedatangan</option>
      </select>

      <input type="text" name="maskapai" placeholder="Maskapai / No Flight" required>
      <input type="text" name="kota" placeholder="Tujuan / Asal" required>
      <input type="text" name="jam" placeholder="Jam (HH:MM)" required>
      <input type="text" name="status" placeholder="Status (TERJADWAL, DELAY, CHECK-IN)" required>

      <button type="submit">ğŸ’¾ Simpan Jadwal</button>
    </form>
  </div>

  <!-- TABEL DATA -->
  <div class="admin-card">
    <div class="card-title">ğŸ“‹ Data Jadwal</div>

    <table class="admin-table">
      <tr>
        <th>Jenis</th>
        <th>Maskapai</th>
        <th>Kota</th>
        <th>Jam</th>
        <th>Status</th>
        <th>Aksi</th>
      </tr>

      {% for f in flights %}
      <tr>
        <td>{{ f.jenis }}</td>
        <td>{{ f.maskapai }}</td>
        <td>{{ f.kota }}</td>
        <td>{{ f.jam }}</td>
        <td class="status {{ f.status|lower }}">{{ f.status }}</td>
        <td>

          <!-- EDIT JAM (SUDAH BENAR - JANGAN DIUBAH) -->
          <form action="/update_jam" method="POST" style="display:inline;">
            <input type="hidden" name="id" value="{{ f.id }}">
        
            <select name="jam_jam">
              {% for j in range(0,24) %}
              <option value="{{ '%02d' % j }}"
                {% if f.jam.split(':')[0] == '%02d' % j %}selected{% endif %}>
                {{ '%02d' % j }}
              </option>
              {% endfor %}
            </select>
            :
            <select name="jam_menit">
              {% for m in range(0,60) %}
              <option value="{{ '%02d' % m }}"
                {% if f.jam.split(':')[1] == '%02d' % m %}selected{% endif %}>
                {{ '%02d' % m }}
              </option>
              {% endfor %}
            </select>
        
            <button type="submit">â±</button>
          </form>
        
          <br>
        
          <!-- EDIT STATUS (BARU) -->
          <form action="/update_status" method="POST" style="display:inline;">
            <input type="hidden" name="id" value="{{ f.id }}">
        
            <select name="status">
              <option value="TERJADWALKAN" {% if f.status=="TERJADWALKAN" %}selected{% endif %}>TERJADWALKAN</option>
              <option value="CHECK-IN" {% if f.status=="CHECK-IN" %}selected{% endif %}>CHECK-IN</option>
              <option value="BOARDING" {% if f.status=="BOARDING" %}selected{% endif %}>BOARDING</option>
              <option value="DELAY" {% if f.status=="DELAY" %}selected{% endif %}>DELAY</option>
              <option value="CANCEL" {% if f.status=="CANCEL" %}selected{% endif %}>CANCEL</option>
            </select>
        
            <button type="submit">ğŸ”„</button>
          </form>
        
          <!-- DELETE (OPSIONAL) -->
          <a href="/delete/{{ f.id }}" onclick="return confirm('Hapus jadwal ini?')">âŒ</a>
        
        </td>       
      </tr>
      {% endfor %}
    </table>

  </div>

</div>

</body>
</html>
